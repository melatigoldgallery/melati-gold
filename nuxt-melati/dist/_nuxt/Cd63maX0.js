const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DmZChluK.js","./Cv6nvi5C.js","./entry.CLdJT17f.css","./CloudinaryUploader.B8ox4cJ-.css"])))=>i.map(i=>d[i]);
import{i as C,r as g,c as m,a as t,t as p,v as B,E as n,d as b,I as E,u as l,F as _,h as M,G as d,b as D,Q as I,R as N,o as y,z as P,B as z}from"#entry";import{u as A}from"./yfo-yYjr.js";const F={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4"},L={class:"bg-white rounded-lg sm:rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},R={class:"sticky top-0 bg-white border-b px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center"},T={class:"text-lg sm:text-xl font-semibold"},$=["value"],q={class:"flex items-center"},j={class:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4"},G=["disabled"],Q=C({__name:"CatalogSubcategoryModal",props:{subcategory:{},categories:{}},emits:["close","saved"],setup(x,{emit:c}){const f=P(()=>z(()=>import("./DmZChluK.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),r=x,v=c,{createSubcategory:w,updateSubcategory:k}=A(),s=g({category_id:"",name:"",slug:"",description:"",cover_image:"",display_order:0,is_active:!0}),u=g(!1),i=g([]);r.subcategory&&(s.value={category_id:r.subcategory.category_id||"",name:r.subcategory.name,slug:r.subcategory.slug,description:r.subcategory.description||"",cover_image:r.subcategory.cover_image||"",display_order:r.subcategory.display_order||0,is_active:r.subcategory.is_active??!0},r.subcategory.cover_image&&(i.value=[r.subcategory.cover_image]));const S=()=>{r.subcategory||(s.value.slug=s.value.name.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""))},U=a=>{a.length>0?(s.value.cover_image=a[0],i.value=a):(s.value.cover_image="",i.value=[])},V=async()=>{u.value=!0;try{const a=r.subcategory?await k(r.subcategory.id,s.value):await w(s.value);a.success?v("saved"):alert("Error: "+a.error)}catch(a){console.error("Error saving subcategory:",a),alert("Failed to save subcategory")}finally{u.value=!1}};return(a,e)=>(y(),m("div",F,[t("div",L,[t("div",R,[t("h3",T,p(a.subcategory?"Edit Subkatigori":"Tambah Subkatigori Baru"),1),t("button",{onClick:e[0]||(e[0]=o=>a.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...e[9]||(e[9]=[t("i",{class:"bi bi-x-lg text-xl sm:text-2xl"},null,-1)])])]),t("form",{onSubmit:B(V,["prevent"]),class:"p-4 sm:p-6 space-y-3 sm:space-y-4"},[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},[b(" Parent Category "),t("span",{class:"text-red-500"},"*")],-1)),n(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).category_id=o),required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},[e[10]||(e[10]=t("option",{value:""},"Pilih Kategori",-1)),(y(!0),m(_,null,M(a.categories,o=>(y(),m("option",{key:o.id,value:o.id},p(o.name),9,$))),128))],512),[[E,l(s).category_id]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},[b(" Nama Subkategori "),t("span",{class:"text-red-500"},"*")],-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).name=o),onInput:S,type:"text",required:"",placeholder:"e.g. Fashion, Anak, Pria",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,544),[[d,l(s).name]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},[b(" Slug "),t("span",{class:"text-red-500"},"*")],-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l(s).slug=o),type:"text",required:"",placeholder:"fashion-anak-pria",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[d,l(s).slug]]),e[14]||(e[14]=t("p",{class:"text-xs text-gray-500 mt-1"},"URL-friendly version (auto-generated from name)",-1))]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Deskripsi",-1)),n(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>l(s).description=o),rows:"3",placeholder:"Brief description of this subcategory",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[d,l(s).description]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Cover Image",-1)),e[17]||(e[17]=t("p",{class:"text-xs text-gray-500 mb-2"},"Upload cover image untuk Subkategori ini",-1)),D(l(f),{modelValue:l(i),"onUpdate:modelValue":e[5]||(e[5]=o=>I(i)?i.value=o:null),onUploaded:U,folder:"subcategories",single:!0,maxSize:5,showUrls:!1},null,8,["modelValue"])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Urutan Display",-1)),n(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l(s).display_order=o),type:"number",min:"0",placeholder:"0",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[d,l(s).display_order,void 0,{number:!0}]]),e[19]||(e[19]=t("p",{class:"text-xs text-gray-500 mt-1"},"Nomor yang lebih rendah muncul pertama",-1))]),t("div",q,[n(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l(s).is_active=o),type:"checkbox",id:"is_active",class:"mr-2"},null,512),[[N,l(s).is_active]]),e[20]||(e[20]=t("label",{for:"is_active",class:"text-xs sm:text-sm text-gray-700"},"Aktif (terlihat oleh pengguna)",-1))]),t("div",j,[t("button",{type:"submit",disabled:l(u),class:"w-full sm:flex-1 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-400 text-white py-2 px-4 rounded-lg transition-colors text-sm sm:text-base"},p(l(u)?"Saving...":a.subcategory?"Update Subcategory":"Create Subcategory"),9,G),t("button",{type:"button",onClick:e[8]||(e[8]=o=>a.$emit("close")),class:"w-full sm:w-auto px-4 sm:px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm sm:text-base"}," Batal ")])],32)])]))}});export{Q as _};
