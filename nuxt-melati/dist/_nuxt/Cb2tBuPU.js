import{_ as N}from"./Cd63maX0.js";import{i as $,r as i,f as T,c as n,a as e,s as U,j as V,d as A,E as D,I as E,u as o,Q as I,F as w,h as _,t as r,o as a,n as K}from"#entry";import{u as z}from"./yfo-yYjr.js";const H={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3"},L={class:"mb-4 sm:mb-6"},Q=["value"],R={key:0,class:"text-center py-12"},q={key:1,class:"space-y-3 sm:space-y-4"},G={class:"flex-shrink-0 w-full sm:w-auto"},J=["src","alt"],O={class:"flex-1 w-full sm:w-auto"},P={class:"flex flex-wrap items-center gap-2 mb-1"},W={class:"font-semibold text-base sm:text-lg"},X={class:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2"},Y={class:"flex flex-wrap items-center gap-2 sm:gap-4 mt-2 text-xs sm:text-sm text-gray-500"},Z={class:"font-medium"},ee={class:"flex gap-2 w-full sm:w-auto"},se=["onClick"],te=["onClick"],le={key:2,class:"text-center py-12 text-gray-500"},oe={class:"text-sm mt-1"},ue=$({__name:"CatalogSubcategoryManager",emits:["alert"],setup(ae,{emit:k}){const d=k,{getCategories:h,getSubcategories:C,deleteSubcategory:S}=z(),m=i([]),g=i([]),u=i(""),p=i(!0),x=i(!1),f=i(null),M=async()=>{const l=await h();l.success&&(m.value=l.data)},c=async()=>{p.value=!0;const l=await C(u.value||void 0);if(l.success)g.value=l.data;else{const s="error"in l?l.error:"Unknown error";d("alert","Failed to load subcategories: "+s,"error")}p.value=!1},v=l=>{f.value=l||null,x.value=!0},y=()=>{x.value=!1,f.value=null},j=()=>{c(),y(),d("alert","Subcategory saved successfully!","success")},B=async l=>{if(!confirm(`Are you sure you want to delete "${l.name}"? This will also delete all products in this subcategory.`))return;const s=await S(l.id);if(s.success)d("alert","Subcategory deleted successfully!","success"),c();else{const b="error"in s?s.error:"Unknown error";d("alert","Failed to delete subcategory: "+b,"error")}};return T(async()=>{await M(),await c()}),(l,s)=>{const b=N;return a(),n("div",null,[e("div",H,[s[3]||(s[3]=e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-900"},"Manajemen Subkategori",-1)),e("button",{onClick:s[0]||(s[0]=t=>v()),class:"w-full sm:w-auto px-3 sm:px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors text-sm sm:text-base"},[...s[2]||(s[2]=[e("i",{class:"bi bi-plus-circle mr-2"},null,-1),A(" Tambah Subkategori ",-1)])])]),e("div",L,[s[5]||(s[5]=e("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-2"},"Filter berdasarkan Kategori",-1)),D(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>I(u)?u.value=t:null),onChange:c,class:"w-full sm:w-64 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},[s[4]||(s[4]=e("option",{value:""},"Semua Kategori",-1)),(a(!0),n(w,null,_(o(m),t=>(a(),n("option",{key:t.id,value:t.id},r(t.name),9,Q))),128))],544),[[E,o(u)]])]),o(p)?(a(),n("div",R,[...s[6]||(s[6]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Memuat subkategori...",-1)])])):o(g).length>0?(a(),n("div",q,[(a(!0),n(w,null,_(o(g),t=>(a(),n("div",{key:t.id,class:"border rounded-lg p-3 sm:p-4 flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 hover:bg-gray-50 transition-colors"},[e("div",G,[e("img",{src:t.cover_image||"/img/placeholder.jpg",alt:t.name,class:"w-full sm:w-20 h-32 sm:h-20 object-cover rounded-lg"},null,8,J)]),e("div",O,[e("div",P,[e("h3",W,r(t.name),1),e("span",{class:K(["px-2 py-1 text-xs rounded-full",t.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"])},r(t.is_active?"Active":"Inactive"),3)]),e("p",X,r(t.description||"No description"),1),e("div",Y,[e("span",Z,"Kategori: "+r(t.category?.name||"N/A"),1),e("span",null,"Slug: "+r(t.slug),1),e("span",null,"Urutan: "+r(t.display_order),1)])]),e("div",ee,[e("button",{onClick:F=>v(t),class:"flex-1 sm:flex-none px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors"},[...s[7]||(s[7]=[e("i",{class:"bi bi-pencil"},null,-1),e("span",{class:"sm:hidden ml-1"},"Edit",-1)])],8,se),e("button",{onClick:F=>B(t),class:"flex-1 sm:flex-none px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm transition-colors"},[...s[8]||(s[8]=[e("i",{class:"bi bi-trash"},null,-1),e("span",{class:"sm:hidden ml-1"},"Hapus",-1)])],8,te)])]))),128))])):(a(),n("div",le,[s[9]||(s[9]=e("i",{class:"bi bi-diagram-3 text-4xl mb-2"},null,-1)),s[10]||(s[10]=e("p",null,"Tidak ada subkategori ditemukan.",-1)),e("p",oe,r(o(u)?"Coba pilih kategori lain":"Buat satu untuk memulai"),1)])),o(x)?(a(),U(b,{key:3,subcategory:o(f),categories:o(m),onClose:y,onSaved:j},null,8,["subcategory","categories"])):V("",!0)])}}});export{ue as default};
