import{i as A,m as V,r as p,f as E,c as r,o as n,a as t,j as w,u as o,F as j,h as M,t as i,v as h,E as x,G as b,d as c}from"#entry";const N={class:"bg-white rounded-lg shadow p-3 sm:p-6"},B={key:0,class:"text-center py-8"},F={key:1,class:"space-y-3 sm:space-y-4"},U={class:"flex items-start sm:items-center justify-between mb-3 gap-2"},W={class:"flex-1 min-w-0"},K={class:"font-semibold text-gray-900 text-sm sm:text-base truncate"},P={class:"text-xs text-gray-500 mt-0.5"},D=["onClick"],G={class:"space-y-2 sm:space-y-3"},$={class:"flex items-start gap-2"},q={class:"flex-1 min-w-0"},z=["href"],H={class:"flex items-start gap-2"},I={class:"flex-1 min-w-0"},J=["href"],O={class:"flex items-start gap-2"},Q={class:"flex-1 min-w-0"},R={class:"text-gray-900 text-xs sm:text-sm font-medium"},X={class:"bg-white rounded-lg max-w-2xl w-full my-4 sm:my-8 max-h-[90vh] overflow-y-auto"},Y={class:"p-4 sm:p-6"},Z={class:"flex items-center justify-between mb-4"},tt={class:"text-base sm:text-xl font-semibold"},et={class:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2"},st=["disabled"],at={key:0,class:"bi bi-arrow-clockwise animate-spin mr-2"},rt=A({__name:"KaratConfigManager",setup(ot){const{$supabase:v}=V(),f=v,C=async()=>{try{const{data:a,error:e}=await f.from("karat_configurations").select("*").order("id");if(e)throw e;return{success:!0,data:a||[]}}catch(a){return{success:!1,error:a.message,data:[]}}},L=async(a,e)=>{try{const{data:s,error:y}=await f.from("karat_configurations").update(e).eq("id",a).select().single();if(y)throw y;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}},g=p(!0),d=p(!1),_=p([]),m=p(null),l=p({shopee_store_url:"",tokopedia_store_url:"",whatsapp_number:"",whatsapp_message_template:""}),k=async()=>{g.value=!0;const a=await C();a.success&&(_.value=a.data),g.value=!1},S=a=>{m.value=a,l.value={shopee_store_url:a.shopee_store_url||"",tokopedia_store_url:a.tokopedia_store_url||"",whatsapp_number:a.whatsapp_number||"",whatsapp_message_template:a.whatsapp_message_template||""}},T=async()=>{if(!m.value)return;d.value=!0;const a=await L(m.value.id,l.value);a.success?(await k(),u()):alert("Gagal menyimpan: "+a.error),d.value=!1},u=()=>{m.value=null,l.value={shopee_store_url:"",tokopedia_store_url:"",whatsapp_number:"",whatsapp_message_template:""}};return E(()=>{k()}),(a,e)=>(n(),r("div",N,[e[21]||(e[21]=t("div",{class:"mb-4 sm:mb-6"},[t("h3",{class:"text-base sm:text-lg font-semibold mb-1 sm:mb-2"},"⚙️ Konfigurasi Kadar Emas"),t("p",{class:"text-xs sm:text-sm text-gray-600"},"Setting link Shopee & WhatsApp untuk kategori kadar emas")],-1)),o(g)?(n(),r("div",B,[...e[4]||(e[4]=[t("i",{class:"bi bi-arrow-clockwise animate-spin text-xl sm:text-2xl text-yellow-600"},null,-1),t("p",{class:"text-xs sm:text-sm text-gray-500 mt-2"},"Loading...",-1)])])):(n(),r("div",F,[(n(!0),r(j,null,M(o(_),s=>(n(),r("div",{key:s.id,class:"border border-gray-200 rounded-lg p-3 sm:p-4 hover:border-yellow-500 transition"},[t("div",U,[t("div",W,[t("h4",K,i(s.name),1),t("p",P,i(s.karat_list.join(", ")),1)]),t("button",{onClick:y=>S(s),class:"flex-shrink-0 px-3 py-1.5 sm:py-1 bg-yellow-50 hover:bg-yellow-100 text-yellow-700 rounded-lg text-xs sm:text-sm font-medium transition-colors"},[...e[5]||(e[5]=[t("i",{class:"bi bi-pencil mr-1"},null,-1),t("span",{class:"hidden xs:inline"},"Edit",-1)])],8,D)]),t("div",G,[t("div",$,[e[7]||(e[7]=t("i",{class:"bi bi-shop text-gray-400 text-sm sm:text-base mt-0.5 flex-shrink-0"},null,-1)),t("div",q,[e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 mb-0.5"},"Link Shopee",-1)),t("a",{href:s.shopee_store_url,target:"_blank",class:"text-blue-600 hover:underline text-xs sm:text-sm break-all line-clamp-2"},i(s.shopee_store_url||"-"),9,z)])]),t("div",H,[e[9]||(e[9]=t("i",{class:"bi bi-bag-check-fill text-gray-400 text-sm sm:text-base mt-0.5 flex-shrink-0"},null,-1)),t("div",I,[e[8]||(e[8]=t("p",{class:"text-xs text-gray-500 mb-0.5"},"Link Tokopedia",-1)),t("a",{href:s.tokopedia_store_url,target:"_blank",class:"text-green-600 hover:underline text-xs sm:text-sm break-all line-clamp-2"},i(s.tokopedia_store_url||"-"),9,J)])]),t("div",O,[e[11]||(e[11]=t("i",{class:"bi bi-whatsapp text-gray-400 text-sm sm:text-base mt-0.5 flex-shrink-0"},null,-1)),t("div",Q,[e[10]||(e[10]=t("p",{class:"text-xs text-gray-500 mb-0.5"},"WhatsApp",-1)),t("p",R,i(s.whatsapp_number||"-"),1)])])])]))),128))])),o(m)?(n(),r("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-3 sm:p-4 z-50 overflow-y-auto",onClick:h(u,["self"])},[t("div",X,[t("div",Y,[t("div",Z,[t("h3",tt,"Edit "+i(o(m).name),1),t("button",{onClick:u,class:"text-gray-400 hover:text-gray-600 p-1",type:"button"},[...e[12]||(e[12]=[t("i",{class:"bi bi-x-lg text-lg"},null,-1)])])]),t("form",{onSubmit:h(T,["prevent"]),class:"space-y-3 sm:space-y-4"},[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2"},"Link Toko Shopee",-1)),x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>o(l).shopee_store_url=s),type:"url",placeholder:"https://shopee.co.id/toko-anda",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[b,o(l).shopee_store_url]]),e[14]||(e[14]=t("p",{class:"text-xs text-gray-500 mt-1"},"Link ke halaman toko Shopee Anda (bukan produk spesifik)",-1))]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2"},"Link Toko Tokopedia",-1)),x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(l).tokopedia_store_url=s),type:"url",placeholder:"https://www.tokopedia.com/toko-anda",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[b,o(l).tokopedia_store_url]]),e[16]||(e[16]=t("p",{class:"text-xs text-gray-500 mt-1"},"Link ke halaman toko Tokopedia Anda (bukan produk spesifik)",-1))]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2"},"Nomor WhatsApp",-1)),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).whatsapp_number=s),type:"text",placeholder:"6281234567890",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[b,o(l).whatsapp_number]]),e[18]||(e[18]=t("p",{class:"text-xs text-gray-500 mt-1"},"Format: 62xxxx (tanpa +, spasi, atau tanda hubung)",-1))]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-xs sm:text-sm font-medium mb-1.5 sm:mb-2"},"Template Pesan WhatsApp",-1)),x(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).whatsapp_message_template=s),rows:"4",placeholder:"Halo, saya tertarik dengan {product_name} kadar {karat}",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[b,o(l).whatsapp_message_template]]),e[20]||(e[20]=t("p",{class:"text-xs text-gray-500 mt-1"},[c(" Placeholder: "),t("code",{class:"bg-gray-100 px-1 py-0.5 rounded"},"{product_name}"),c(" , "),t("code",{class:"bg-gray-100 px-1 py-0.5 rounded"},"{karat}"),c(" , "),t("code",{class:"bg-gray-100 px-1 py-0.5 rounded"},"{price}")],-1))]),t("div",et,[t("button",{type:"submit",disabled:o(d),class:"w-full sm:flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-2.5 sm:py-2 px-4 rounded-lg font-medium disabled:opacity-50 text-sm sm:text-base"},[o(d)?(n(),r("i",at)):w("",!0),c(" "+i(o(d)?"Menyimpan...":"Simpan Perubahan"),1)],8,st),t("button",{type:"button",onClick:u,class:"w-full sm:flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2.5 sm:py-2 px-4 rounded-lg font-medium text-sm sm:text-base"}," Batal ")])],32)])])])):w("",!0)]))}});export{rt as default};
