const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DmZChluK.js","./Cv6nvi5C.js","./entry.CLdJT17f.css","./CloudinaryUploader.B8ox4cJ-.css"])))=>i.map(i=>d[i]);
import{i as U,r as m,f as C,q as V,c as S,a as l,t as g,v as p,E as n,G as u,u as s,b as B,Q as M,R as $,o as A,z as E,B as N}from"#entry";import{u as z}from"./yfo-yYjr.js";const D={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},K={class:"p-4 sm:p-6"},R={class:"flex justify-between items-center mb-4 sm:mb-6"},T={class:"text-lg sm:text-xl font-semibold"},q={class:"flex items-center"},G={class:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-4"},I=["disabled"],P=U({__name:"CatalogCategoryModal",props:{category:{}},emits:["close","saved"],setup(f,{emit:y}){const b=E(()=>N(()=>import("./DmZChluK.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),r=f,c=y,{createCategory:v,updateCategory:x}=z(),d=m(!1),i=m([]),o=m({name:"",slug:"",description:"",cover_image:"",icon:"",display_order:0,is_active:!0});C(()=>{r.category&&(o.value={...r.category},r.category.cover_image&&(i.value=[r.category.cover_image]))}),V(()=>o.value.name,a=>{r.category||(o.value.slug=a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""))});const w=a=>{a.length>0?(o.value.cover_image=a[0],i.value=a):(o.value.cover_image="",i.value=[])},k=async()=>{d.value=!0;try{const a=r.category?await x(r.category.id,o.value):await v(o.value);a.success?c("saved"):alert("Failed to save category: "+a.error)}catch{alert("An error occurred while saving")}finally{d.value=!1}};return(a,e)=>(A(),S("div",{class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-3 sm:p-4 z-50",onClick:e[9]||(e[9]=p(t=>a.$emit("close"),["self"]))},[l("div",D,[l("div",K,[l("div",R,[l("h2",T,g(a.category?"Edit":"Tambah")+" Kategori",1),l("button",{onClick:e[0]||(e[0]=t=>a.$emit("close")),class:"text-gray-500 hover:text-gray-700"},[...e[10]||(e[10]=[l("i",{class:"bi bi-x-lg text-lg sm:text-xl"},null,-1)])])]),l("form",{onSubmit:p(k,["prevent"]),class:"space-y-4"},[l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium mb-2"},"Nama Kategori *",-1)),n(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s(o).name=t),type:"text",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"e.g., Kalung, Anting, Gelang"},null,512),[[u,s(o).name]])]),l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium mb-2"},"Slug *",-1)),n(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s(o).slug=t),type:"text",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"e.g., kalung (lowercase, no spaces)"},null,512),[[u,s(o).slug]]),e[13]||(e[13]=l("p",{class:"text-xs text-gray-500 mt-1"},"URL-friendly version of the name",-1))]),l("div",null,[e[14]||(e[14]=l("label",{class:"block text-sm font-medium mb-2"},"Deskripsi",-1)),n(l("textarea",{"onUpdate:modelValue":e[3]||(e[3]=t=>s(o).description=t),rows:"3",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"Brief description of this category"},null,512),[[u,s(o).description]])]),l("div",null,[e[15]||(e[15]=l("label",{class:"block text-sm font-medium mb-2"},"Gambar Sampul",-1)),B(s(b),{modelValue:s(i),"onUpdate:modelValue":e[4]||(e[4]=t=>M(i)?i.value=t:null),onUploaded:w,folder:"categories",single:!0,maxSize:5,showUrls:!1},null,8,["modelValue"])]),l("div",null,[e[16]||(e[16]=l("label",{class:"block text-sm font-medium mb-2"},"Nama Ikon",-1)),n(l("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>s(o).icon=t),type:"text",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500",placeholder:"e.g., kalung-icon"},null,512),[[u,s(o).icon]])]),l("div",null,[e[17]||(e[17]=l("label",{class:"block text-sm font-medium mb-2"},"Urutan Tampilan",-1)),n(l("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>s(o).display_order=t),type:"number",min:"0",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[u,s(o).display_order,void 0,{number:!0}]]),e[18]||(e[18]=l("p",{class:"text-xs text-gray-500 mt-1"},"Nomor yang lebih rendah muncul pertama",-1))]),l("div",q,[n(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s(o).is_active=t),type:"checkbox",id:"is_active",class:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"},null,512),[[$,s(o).is_active]]),e[19]||(e[19]=l("label",{for:"is_active",class:"ml-2 text-sm font-medium"},"Aktif (ditampilkan di situs web)",-1))]),l("div",G,[l("button",{type:"submit",disabled:s(d),class:"w-full sm:flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-2 px-4 rounded-lg font-medium disabled:opacity-50 transition-colors text-sm sm:text-base"},g(s(d)?"Saving...":"Simpan Kategori"),9,I),l("button",{type:"button",onClick:e[8]||(e[8]=t=>a.$emit("close")),class:"w-full sm:flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium transition-colors text-sm sm:text-base"}," Batal ")])],32)])])]))}});export{P as _};
