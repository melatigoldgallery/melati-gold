const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DmZChluK.js","./Cv6nvi5C.js","./entry.CLdJT17f.css","./CloudinaryUploader.B8ox4cJ-.css"])))=>i.map(i=>d[i]);
import{i as R,r as m,e as $,f as O,c as n,a as t,t as x,v as z,E as u,d as b,G as c,u as l,Q as _,b as q,j as C,F as V,h as P,R as G,o as a,z as K,B as H}from"#entry";import{u as Q}from"./yfo-yYjr.js";const J={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-3 sm:p-4"},W={class:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},X={class:"sticky top-0 bg-white border-b px-4 sm:px-6 py-3 sm:py-4 flex justify-between items-center"},Y={class:"text-lg sm:text-xl font-semibold"},Z={key:0,class:"text-center py-4"},ee={key:1},te={class:"mb-3"},se={key:0,class:"mb-3"},le={class:"text-xs text-gray-600 mb-2"},oe={class:"flex flex-wrap gap-2"},re=["onClick"],ie={class:"border border-gray-300 rounded-lg max-h-64 overflow-y-auto"},ne={key:0,class:"p-4 text-center text-gray-500 text-sm"},ae=["checked","onChange"],ue=["src","alt"],de={key:1,class:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center"},ce={class:"flex-1 min-w-0"},me={class:"font-medium text-sm text-gray-900 truncate"},xe={class:"text-xs text-gray-500 truncate"},pe={class:"text-xs text-yellow-600"},ge={key:2,class:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded"},be={class:"flex items-center"},ve={class:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-3 sm:pt-4"},fe=["disabled"],ke=R({__name:"CatalogServiceModal",props:{service:{}},emits:["close","saved"],setup(S,{emit:D}){const E=K(()=>H(()=>import("./DmZChluK.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),i=S,I=D,{createCustomService:M,updateCustomService:B,getProducts:F}=Q(),r=m({title:"",subtitle:"",description:"",icon:"bi bi-gear",image_url:"",duration:"",price_info:"",display_order:0,is_active:!0}),v=m(""),y=m(!1),p=m([]),w=m([]),k=m(!0),g=m(""),d=m([]),L=async()=>{k.value=!0;const o=await F({});o.success&&(w.value=(o.data||[]).filter(e=>e.is_active)),k.value=!1},h=$(()=>{if(!g.value)return w.value;const o=g.value.toLowerCase();return w.value.filter(e=>e.title?.toLowerCase().includes(o)||e.subtitle?.toLowerCase().includes(o)||e.description?.toLowerCase().includes(o))}),U=o=>{const e=d.value.indexOf(o);e>-1?d.value.splice(e,1):d.value.push(o)},N=o=>w.value.find(s=>s.id===o)?.title||"Unknown",T=o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(o);i.service&&(r.value={title:i.service.title,subtitle:i.service.subtitle||"",description:i.service.description,icon:i.service.icon||"bi bi-gear",image_url:i.service.image_url||"",duration:i.service.duration||"",price_info:i.service.price_info||"",display_order:i.service.display_order||0,is_active:i.service.is_active??!0},v.value=i.service.features?i.service.features.join(`
`):"",i.service.image_url&&(p.value=[i.service.image_url]),i.service.example_products&&Array.isArray(i.service.example_products)&&(d.value=[...i.service.example_products])),O(()=>{L()});const j=o=>{o.length>0?(r.value.image_url=o[0],p.value=o):(r.value.image_url="",p.value=[])},A=async()=>{y.value=!0;try{const o=v.value.split(`
`).map(f=>f.trim()).filter(f=>f.length>0),e={...r.value,features:o,example_products:d.value},s=i.service?await B(i.service.id,e):await M(e);s.success?I("saved"):alert("Error: "+s.error)}catch(o){console.error("Error saving service:",o),alert("Failed to save service")}finally{y.value=!1}};return(o,e)=>(a(),n("div",J,[t("div",W,[t("div",X,[t("h3",Y,x(o.service?"Edit Custom Service":"Add New Custom Service"),1),t("button",{onClick:e[0]||(e[0]=s=>o.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...e[13]||(e[13]=[t("i",{class:"bi bi-x-lg text-xl sm:text-2xl"},null,-1)])])]),t("form",{onSubmit:z(A,["prevent"]),class:"p-4 sm:p-6 space-y-3 sm:space-y-4"},[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},[b(" Title "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l(r).title=s),type:"text",required:"",placeholder:"e.g. Konsultasi Desain Perhiasan",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[c,l(r).title]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Subtitle",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l(r).subtitle=s),type:"text",placeholder:"Short tagline",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[c,l(r).subtitle]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},[b(" Description "),t("span",{class:"text-red-500"},"*")],-1)),u(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>l(r).description=s),rows:"4",required:"",placeholder:"Detailed description of the service",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[c,l(r).description]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},[b(" Icon "),t("span",{class:"text-gray-500"},"(Bootstrap Icons class)")],-1)),u(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>l(r).icon=s),type:"text",placeholder:"bi bi-tools",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[c,l(r).icon]]),e[18]||(e[18]=t("p",{class:"text-xs text-gray-500 mt-1"},[b(" Find icons at "),t("a",{href:"https://icons.getbootstrap.com/",target:"_blank",class:"text-blue-600 hover:underline"}," Bootstrap Icons ")],-1))]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Features",-1)),u(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=s=>_(v)?v.value=s:null),rows:"4",placeholder:`Enter each feature on a new line:
Konsultasi gratis
Design custom sesuai keinginan
Revisi unlimited`,class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500 font-mono"},null,512),[[c,l(v)]]),e[20]||(e[20]=t("p",{class:"text-xs text-gray-500 mt-1"},"One feature per line",-1))]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Service Image",-1)),e[22]||(e[22]=t("p",{class:"text-xs text-gray-500 mb-2"},"Upload an image to represent this service",-1)),q(l(E),{modelValue:l(p),"onUpdate:modelValue":e[6]||(e[6]=s=>_(p)?p.value=s:null),onUploaded:j,folder:"services",single:!0,maxSize:5,showUrls:!1},null,8,["modelValue"])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Duration",-1)),u(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>l(r).duration=s),type:"text",placeholder:"e.g. 30-60 menit, 1-2 minggu",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[c,l(r).duration]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Price Info",-1)),u(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>l(r).price_info=s),type:"text",placeholder:"e.g. Gratis, Mulai dari Rp 500.000",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[c,l(r).price_info]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-2"},[b(" Contoh Produk "),t("span",{class:"text-gray-500 text-xs font-normal"},"(Opsional - untuk ditampilkan di website)")],-1)),l(k)?(a(),n("div",Z,[...e[25]||(e[25]=[t("div",{class:"inline-block w-6 h-6 border-2 border-yellow-600 border-t-transparent rounded-full animate-spin"},null,-1),t("p",{class:"text-sm text-gray-500 mt-2"},"Memuat produk...",-1)])])):(a(),n("div",ee,[t("div",te,[u(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>_(g)?g.value=s:null),type:"text",placeholder:"Cari produk...",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[c,l(g)]])]),l(d).length>0?(a(),n("div",se,[t("p",le,"Produk terpilih ("+x(l(d).length)+"):",1),t("div",oe,[(a(!0),n(V,null,P(l(d),s=>(a(),n("div",{key:s,class:"flex items-center gap-2 bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm"},[t("span",null,x(N(s)),1),t("button",{type:"button",onClick:f=>U(s),class:"hover:text-yellow-900"},[...e[26]||(e[26]=[t("i",{class:"bi bi-x text-lg"},null,-1)])],8,re)]))),128))])])):C("",!0),t("div",ie,[l(h).length===0?(a(),n("div",ne,x(l(g)?"Tidak ada produk yang cocok":"Belum ada produk tersedia"),1)):C("",!0),(a(!0),n(V,null,P(l(h),s=>(a(),n("label",{key:s.id,class:"flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0"},[t("input",{type:"checkbox",checked:l(d).includes(s.id),onChange:f=>U(s.id),class:"w-4 h-4 text-yellow-600 focus:ring-yellow-500 rounded"},null,40,ae),s.thumbnail_image?(a(),n("img",{key:0,src:s.thumbnail_image,alt:s.title,class:"w-12 h-12 object-cover rounded"},null,8,ue)):(a(),n("div",de,[...e[27]||(e[27]=[t("i",{class:"bi bi-image text-gray-400"},null,-1)])])),t("div",ce,[t("p",me,x(s.title),1),t("p",xe,x(s.subtitle||"No subtitle"),1),t("p",pe,x(T(s.price)),1)]),s.stock<=0?(a(),n("span",ge,"Habis")):C("",!0)]))),128))]),e[28]||(e[28]=t("p",{class:"text-xs text-gray-500 mt-2"},[t("i",{class:"bi bi-info-circle mr-1"}),b(" Pilih 3-6 produk sebagai contoh untuk layanan ini ")],-1))]))]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-xs sm:text-sm font-medium text-gray-700 mb-1"},"Display Order",-1)),u(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>l(r).display_order=s),type:"number",min:"0",placeholder:"0",class:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},null,512),[[c,l(r).display_order,void 0,{number:!0}]]),e[31]||(e[31]=t("p",{class:"text-xs text-gray-500 mt-1"},"Lower numbers appear first",-1))]),t("div",be,[u(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>l(r).is_active=s),type:"checkbox",id:"service_is_active",class:"mr-2"},null,512),[[G,l(r).is_active]]),e[32]||(e[32]=t("label",{for:"service_is_active",class:"text-xs sm:text-sm text-gray-700"},"Active (visible to users)",-1))]),t("div",ve,[t("button",{type:"submit",disabled:l(y),class:"w-full sm:flex-1 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-400 text-white py-2 px-4 rounded-lg transition-colors text-sm sm:text-base"},x(l(y)?"Saving...":o.service?"Update Service":"Create Service"),9,fe),t("button",{type:"button",onClick:e[12]||(e[12]=s=>o.$emit("close")),class:"w-full sm:w-auto px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm sm:text-base"}," Cancel ")])],32)])]))}});export{ke as _};
