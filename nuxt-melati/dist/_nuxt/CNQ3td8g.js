import{_ as C}from"./Vuel_8qF.js";import{u as M}from"./yfo-yYjr.js";import{i as j,r as u,f as B,c as d,a as e,s as $,j as D,d as F,u as t,F as K,h as L,t as a,o as n,n as N}from"#entry";const S={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3"},T={key:0,class:"text-center py-12"},V={key:1,class:"space-y-3 sm:space-y-4"},A={class:"flex-shrink-0 w-full sm:w-auto"},E=["src","alt"],I={class:"flex-1 w-full sm:w-auto"},U={class:"flex flex-wrap items-center gap-2 mb-1"},z={class:"font-semibold text-base sm:text-lg"},H={class:"text-xs sm:text-sm text-gray-600 mt-1 line-clamp-2"},O={class:"flex flex-wrap items-center gap-2 sm:gap-4 mt-2 text-xs sm:text-sm text-gray-500"},q={class:"flex gap-2 w-full sm:w-auto"},G=["onClick"],J=["onClick"],P={key:2,class:"text-center py-12 text-gray-500"},Q={class:"text-xs mt-2"},R={key:3,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6"},W={class:"text-sm text-yellow-800 space-y-1"},se=j({__name:"CatalogCategoryManager",emits:["alert"],setup(X,{emit:v}){const c=v,{getCategories:y,deleteCategory:w}=M(),r=u([]),i=u(!0),m=u(!1),g=u(null),p=async()=>{i.value=!0;const o=await y();if(o.success)r.value=o.data;else{const s="error"in o?o.error:"Unknown error";c("alert","Failed to load categories: "+s,"error")}i.value=!1},f=o=>{g.value=o||null,m.value=!0},b=()=>{m.value=!1,g.value=null},_=()=>{p(),b(),c("alert","Category saved successfully!","success")},h=async o=>{if(!confirm(`Are you sure you want to delete "${o.name}"? This will also delete all its subcategories and products.`))return;const s=await w(o.id);if(s.success)c("alert","Category deleted successfully!","success"),p();else{const x="error"in s?s.error:"Unknown error";c("alert","Failed to delete category: "+x,"error")}};return B(()=>{p()}),(o,s)=>{const x=C;return n(),d("div",null,[e("div",S,[s[2]||(s[2]=e("h2",{class:"text-lg sm:text-xl font-semibold text-gray-900"},"Manajemen Kategori",-1)),e("button",{onClick:s[0]||(s[0]=l=>f()),class:"w-full sm:w-auto px-3 sm:px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors text-sm sm:text-base"},[...s[1]||(s[1]=[e("i",{class:"bi bi-plus-circle mr-2"},null,-1),F(" Tambah Kategori ",-1)])])]),t(i)?(n(),d("div",T,[...s[3]||(s[3]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Loading categories...",-1)])])):!t(i)&&t(r).length>0?(n(),d("div",V,[(n(!0),d(K,null,L(t(r),l=>(n(),d("div",{key:l.id,class:"border rounded-lg p-3 sm:p-4 flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 hover:bg-gray-50 transition-colors"},[e("div",A,[e("img",{src:l.cover_image||"/img/placeholder.jpg",alt:l.name,class:"w-full sm:w-20 h-32 sm:h-20 object-cover rounded-lg"},null,8,E)]),e("div",I,[e("div",U,[e("h3",z,a(l.name),1),e("span",{class:N(["px-2 py-1 text-xs rounded-full",l.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"])},a(l.is_active?"Active":"Inactive"),3)]),e("p",H,a(l.description||"No description"),1),e("div",O,[e("span",null,"Slug: "+a(l.slug),1),e("span",null,"Order: "+a(l.display_order),1)])]),e("div",q,[e("button",{onClick:k=>f(l),class:"flex-1 sm:flex-none px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors"},[...s[4]||(s[4]=[e("i",{class:"bi bi-pencil"},null,-1),e("span",{class:"sm:hidden ml-1"},"Edit",-1)])],8,G),e("button",{onClick:k=>h(l),class:"flex-1 sm:flex-none px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm transition-colors"},[...s[5]||(s[5]=[e("i",{class:"bi bi-trash"},null,-1),e("span",{class:"sm:hidden ml-1"},"Hapus",-1)])],8,J)])]))),128))])):!t(i)&&t(r).length===0?(n(),d("div",P,[s[6]||(s[6]=e("i",{class:"bi bi-grid-3x3-gap text-4xl mb-2"},null,-1)),s[7]||(s[7]=e("p",null,"Tidak ada kategori ditemukan. Buat satu untuk memulai.",-1)),e("p",Q,"Debug: Loading="+a(t(i))+", Categories="+a(t(r).length),1)])):(n(),d("div",R,[s[8]||(s[8]=e("h3",{class:"font-semibold text-yellow-900 mb-2"},"⚠️ Debug Info",-1)),e("div",W,[e("p",null,"Loading: "+a(t(i)),1),e("p",null,"Kategori length: "+a(t(r).length),1),e("p",null,"Kategori data: "+a(t(r)),1)])])),t(m)?(n(),$(x,{key:4,category:t(g),onClose:b,onSaved:_},null,8,["category"])):D("",!0)])}}});export{se as default};
