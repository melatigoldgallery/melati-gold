import{_ as ee}from"./DYXU4P4V.js";import{i as te,r as c,e as _,f as se,c as a,a as t,j as b,s as le,d as oe,E as $,I as j,u as o,F as k,h as C,t as d,n as f,o as r}from"#entry";import{u as re}from"./yfo-yYjr.js";import"./Jqm9ZWvo.js";import"./Cxate6rl.js";const ae={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3"},ne={class:"mb-4 sm:mb-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"},ie=["value"],de=["value"],ue={key:0,class:"text-center py-12"},ce={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4"},ge=["src","alt"],me={class:"mb-2 sm:mb-3"},be={class:"flex items-start justify-between mb-1 sm:mb-2"},ye={class:"font-semibold text-sm sm:text-lg line-clamp-2 flex-1"},pe={class:"flex gap-1 ml-2 flex-shrink-0"},xe={key:0,class:"px-1.5 sm:px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",title:"Featured"},fe={key:1,class:"px-1.5 sm:px-2 py-1 bg-yellow-100 text-yellow-700 text-xs rounded-full",title:"Best Seller"},ve={class:"text-xs sm:text-sm text-gray-600 mb-1 sm:mb-2"},he={class:"text-xs text-gray-500 truncate"},we={class:"flex flex-wrap gap-1 sm:gap-2 mt-1 sm:mt-2 text-xs"},_e={key:0,class:"px-2 py-0.5 sm:py-1 bg-gray-100 rounded"},ke={key:1,class:"px-2 py-0.5 sm:py-1 bg-gray-100 rounded"},Ce={class:"flex gap-1 sm:gap-2"},Pe=["onClick"],Ie=["onClick"],Se={class:"flex gap-1 sm:gap-2 mt-1 sm:mt-2"},Me=["onClick"],Fe=["onClick"],Be={key:2,class:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-3 sm:gap-4"},$e={class:"text-sm text-gray-600"},je={class:"flex items-center gap-2"},De=["disabled"],Ve={class:"flex gap-1"},Te=["onClick"],Ue=["disabled"],Ne={key:3,class:"text-center py-12 text-gray-500"},qe=te({__name:"CatalogProductManager",emits:["alert"],setup(Ee,{emit:U}){const g=U,{getProducts:N,getCategories:E,getSubcategories:L,deleteProduct:z,toggleProductFeatured:K,toggleProductBestSeller:O}=re(),P=c([]),I=c([]),v=c([]),p=c(!0),S=c(!1),M=c(null),n=c({categoryId:"",subcategoryId:"",status:""}),i=c(1),x=c(12),h=c(0),R=_(()=>n.value.categoryId?v.value.filter(l=>l.category_id===n.value.categoryId):v.value),w=_(()=>Math.ceil(h.value/x.value)),D=_(()=>{const l=(i.value-1)*x.value,e=l+x.value;return P.value.slice(l,e)}),q=_(()=>{const l=[],e=w.value,u=i.value;if(e<=7)for(let s=1;s<=e;s++)l.push(s);else{l.push(1),u>3&&l.push("...");const s=Math.max(2,u-1),y=Math.min(e-1,u+1);for(let B=s;B<=y;B++)l.push(B);u<e-2&&l.push("..."),l.push(e)}return l}),F=l=>{typeof l!="string"&&l>=1&&l<=w.value&&(i.value=l,window.scrollTo({top:0,behavior:"smooth"}))},A=()=>F(i.value+1),G=()=>F(i.value-1),m=async()=>{p.value=!0;const l={};n.value.categoryId&&(l.categoryId=n.value.categoryId),n.value.subcategoryId&&(l.subcategoryId=n.value.subcategoryId),n.value.status==="featured"&&(l.isFeatured=!0),n.value.status==="best_seller"&&(l.isBestSeller=!0);const e=await N(l);if(e.success)P.value=e.data,h.value=e.data.length,i.value=1;else{const u="error"in e?e.error:"Unknown error";g("alert","Failed to load products: "+u,"error")}p.value=!1},H=async()=>{const l=await E();l.success&&(I.value=l.data)},J=async()=>{const l=await L();l.success&&(v.value=l.data)},V=l=>{M.value=l||null,S.value=!0},T=()=>{S.value=!1,M.value=null},Q=()=>{m(),T(),g("alert","Product saved successfully!","success")},W=async l=>{(await K(l.id)).success?(m(),g("alert",`Product ${l.is_featured?"removed from":"added to"} featured`,"success")):g("alert","Failed to update product","error")},X=async l=>{(await O(l.id)).success?(m(),g("alert",`Product ${l.is_best_seller?"removed from":"added to"} best sellers`,"success")):g("alert","Failed to update product","error")},Y=async l=>{if(!confirm(`Delete "${l.title}"?`))return;const e=await z(l.id);if(e.success)g("alert","Product deleted successfully!","success"),m();else{const u="error"in e?e.error:"Unknown error";g("alert","Failed to delete product: "+u,"error")}},Z=l=>l?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(l):"-";return se(()=>{H(),J(),m()}),(l,e)=>{const u=ee;return r(),a("div",null,[t("div",ae,[e[5]||(e[5]=t("h2",{class:"text-lg sm:text-xl font-semibold text-gray-900"},"Manajemen Produk",-1)),t("button",{onClick:e[0]||(e[0]=s=>V()),class:"w-full sm:w-auto px-3 sm:px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors text-sm sm:text-base"},[...e[4]||(e[4]=[t("i",{class:"bi bi-plus-circle mr-2"},null,-1),oe(" Tambah Produk ",-1)])])]),t("div",ne,[$(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(n).categoryId=s),onChange:m,class:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},[e[6]||(e[6]=t("option",{value:""},"Semua Kategori",-1)),(r(!0),a(k,null,C(o(I),s=>(r(),a("option",{key:s.id,value:s.id},d(s.name),9,ie))),128))],544),[[j,o(n).categoryId]]),$(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(n).subcategoryId=s),onChange:m,class:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},[e[7]||(e[7]=t("option",{value:""},"Semua Subkategori",-1)),(r(!0),a(k,null,C(o(R),s=>(r(),a("option",{key:s.id,value:s.id},d(s.name),9,de))),128))],544),[[j,o(n).subcategoryId]]),$(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o(n).status=s),onChange:m,class:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-yellow-500"},[...e[8]||(e[8]=[t("option",{value:""},"Semua Status",-1),t("option",{value:"featured"},"Featured",-1),t("option",{value:"best_seller"},"Best Seller",-1)])],544),[[j,o(n).status]])]),o(p)?(r(),a("div",ue,[...e[9]||(e[9]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Loading products...",-1)])])):o(D).length>0?(r(),a("div",ce,[(r(!0),a(k,null,C(o(D),s=>(r(),a("div",{key:s.id,class:"border rounded-lg p-3 sm:p-4 hover:shadow-md transition-shadow"},[t("img",{src:s.thumbnail_image||"/img/placeholder.jpg",alt:s.title,class:"w-full h-40 sm:h-48 object-cover rounded-lg mb-2 sm:mb-3"},null,8,ge),t("div",me,[t("div",be,[t("h3",ye,d(s.title),1),t("div",pe,[s.is_featured?(r(),a("span",xe,[...e[10]||(e[10]=[t("i",{class:"bi bi-star-fill"},null,-1)])])):b("",!0),s.is_best_seller?(r(),a("span",fe,[...e[11]||(e[11]=[t("i",{class:"bi bi-trophy-fill"},null,-1)])])):b("",!0)])]),t("p",ve,d(Z(s.price)),1),t("p",he,d(s.category?.name)+" â†’ "+d(s.subcategory?.name),1),t("div",we,[s.karat?(r(),a("span",_e,d(s.karat),1)):b("",!0),s.weight?(r(),a("span",ke,d(s.weight),1)):b("",!0)])]),t("div",Ce,[t("button",{onClick:y=>W(s),class:f(["flex-1 px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm rounded-lg transition-colors",s.is_featured?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},[...e[12]||(e[12]=[t("i",{class:"bi bi-star-fill"},null,-1),t("span",{class:"hidden xs:inline ml-1"},"Featured",-1)])],10,Pe),t("button",{onClick:y=>X(s),class:f(["flex-1 px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm rounded-lg transition-colors",s.is_best_seller?"bg-yellow-600 text-white hover:bg-yellow-700":"bg-gray-200 text-gray-700 hover:bg-gray-300"])},[...e[13]||(e[13]=[t("i",{class:"bi bi-trophy-fill"},null,-1),t("span",{class:"hidden xs:inline ml-1"},"Best",-1)])],10,Ie)]),t("div",Se,[t("button",{onClick:y=>V(s),class:"flex-1 px-2 sm:px-3 py-1.5 sm:py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-xs sm:text-sm"},[...e[14]||(e[14]=[t("i",{class:"bi bi-pencil"},null,-1),t("span",{class:"hidden xs:inline ml-1"},"Edit",-1)])],8,Me),t("button",{onClick:y=>Y(s),class:"flex-1 px-2 sm:px-3 py-1.5 sm:py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg text-xs sm:text-sm"},[...e[15]||(e[15]=[t("i",{class:"bi bi-trash"},null,-1),t("span",{class:"hidden xs:inline ml-1"},"Delete",-1)])],8,Fe)])]))),128))])):b("",!0),!o(p)&&o(P).length>0?(r(),a("div",Be,[t("div",$e," Menampilkan "+d((o(i)-1)*o(x)+1)+"-"+d(Math.min(o(i)*o(x),o(h)))+" dari "+d(o(h))+" produk ",1),t("div",je,[t("button",{onClick:G,disabled:o(i)===1,class:f(["px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",{"opacity-50 cursor-not-allowed":o(i)===1}])},[...e[16]||(e[16]=[t("i",{class:"bi bi-chevron-left"},null,-1)])],10,De),t("div",Ve,[(r(!0),a(k,null,C(o(q),s=>(r(),a("button",{key:s,onClick:y=>F(s),class:f(["w-10 h-10 flex items-center justify-center rounded-lg font-medium transition-colors",s===o(i)?"bg-yellow-600 text-white":"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700"])},d(s),11,Te))),128))]),t("button",{onClick:A,disabled:o(i)===o(w),class:f(["px-3 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",{"opacity-50 cursor-not-allowed":o(i)===o(w)}])},[...e[17]||(e[17]=[t("i",{class:"bi bi-chevron-right"},null,-1)])],10,Ue)])])):o(p)?b("",!0):(r(),a("div",Ne,[...e[18]||(e[18]=[t("i",{class:"bi bi-box-seam text-4xl mb-2"},null,-1),t("p",null,"Tidak ada produk ditemukan. Buat untuk memulai.",-1)])])),o(S)?(r(),le(u,{key:4,product:o(M),categories:o(I),subcategories:o(v),onClose:T,onSaved:Q},null,8,["product","categories","subcategories"])):b("",!0)])}}});export{qe as default};
