# Netlify Configuration for Nuxt in Subfolder
[build]
  # Base directory tempat aplikasi berada
  base = "nuxt-melati"

  # Build command
  command = "npm run build"

  # Publish directory - Nuxt generates to dist for static SPA
  publish = "dist"

# Node version
[build.environment]
  NODE_VERSION = "20"

# Functions configuration
[functions]
  # Directory untuk serverless functions (relative to base directory)
  directory = ".netlify/functions"
  # Node bundler untuk TypeScript support
  node_bundler = "esbuild"

# Scheduled Functions - Keep Supabase Database Active
# Function ini akan berjalan otomatis setiap hari untuk mencegah auto-pause
[[functions]]
  path = "/scheduled-db-ping"
  schedule = "0 3 * * *"  # Runs setiap hari jam 3:00 AM UTC

# SPA fallback untuk client-side routing
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
